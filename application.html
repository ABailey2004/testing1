<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="csrf-token" content="uGGFiSgse2jA2tu5jSwMEuMHvN6SO3DAP7hg5Q6Y">

    <title>Application Form | Blue Light RPC</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.bunny.net">
    <link href="https://fonts.bunny.net/css?family=figtree:400,500,600&display=swap" rel="stylesheet" />

    <!-- Styles -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Heebo" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Inter" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/assets/css/global.css?1726979012">
    <link rel="stylesheet" type="text/css" href="/assets/css/toastr.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/dataTables.bootstrap5.min.css">
    <link rel="stylesheet" type="text/css" href="/assets/fonts/console-icons/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/quill@2.0.2/dist/quill.snow.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" type="text/css" href="/assets/css/custom.css">

    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="BLRPC" />
    <link rel="manifest" href="/site.webmanifest" />
</head>
<body>
    <!-- Start Topbar -->
<div class="topbar bg-white">
    <div class="container" style="position: relative;z-index: 1;">
        <div class="row">
            <div class="col-12 d-flex align-items-center gap-1">
                <span class="topbar-title">Blue Light RPC</span>
            </div>
        </div>
    </div>
</div>
<!-- End Topbar -->

<!-- Start Navigation -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark mainNavigation">
    <div class="container">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="/">Homepage</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="/about.html">About us</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="/get-involved.html">Get Involved</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="/rules.html">Rules</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="/privacy.html">Privacy Policy</a>
                </li>
            </ul>
        </div>
    </div>
</nav>
<!-- End Navigation -->

    <div id="app" class="mb-3">
        <div class="page-content">
            <div class="container py-5">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="content-card">
                            <div class="page-header text-center mb-4">
                                <h1 class="page-title">Application Form</h1>
                                <p class="page-subtitle">Join the Blue Light RPC community today</p>
                            </div>
                            
                            <form id="applicationForm">
                                <div class="form-section">
                                    <h3 class="form-section-title"><i class="fas fa-user"></i> Personal Information</h3>
                                    
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="firstName" class="form-label">First Name <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="firstName" name="firstName" required>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label for="lastName" class="form-label">Last Name <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="lastName" name="lastName" required>
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="age" class="form-label">Age <span class="text-danger">*</span></label>
                                            <input type="number" class="form-control" id="age" name="age" min="14" max="100" required>
                                            <div class="form-text">Must be 14 or older</div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label for="timezone" class="form-label">Timezone <span class="text-danger">*</span></label>
                                            <select class="form-select" id="timezone" name="timezone" required>
                                                <option value="">Select your timezone</option>
                                                <option value="GMT">GMT (Greenwich Mean Time)</option>
                                                <option value="BST">BST (British Summer Time)</option>
                                                <option value="EST">EST (Eastern Standard Time)</option>
                                                <option value="PST">PST (Pacific Standard Time)</option>
                                                <option value="CET">CET (Central European Time)</option>
                                                <option value="Other">Other</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="discordUsername" class="form-label">Discord Username <span class="text-danger">*</span></label>
                                        <input type="text" class="form-control" id="discordUsername" name="discordUsername" placeholder="e.g., Username#1234" required>
                                        <div class="form-text">Include your full Discord username with discriminator</div>
                                    </div>
                                </div>

                                <div class="form-section">
                                    <h3 class="form-section-title"><i class="fas fa-shield-alt"></i> Service Preferences</h3>
                                    
                                    <div class="mb-3">
                                        <label for="primaryService" class="form-label">Primary Service Choice <span class="text-danger">*</span></label>
                                        <select class="form-select" id="primaryService" name="primaryService" required>
                                            <option value="">Select your preferred service</option>
                                            <option value="Police Scotland">Police Scotland</option>
                                            <option value="Scottish Ambulance Service">Scottish Ambulance Service</option>
                                            <option value="Scottish Fire and Rescue Service">Scottish Fire and Rescue Service</option>
                                            <option value="Civilian">Civilian</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="secondaryService" class="form-label">Secondary Service Choice (Optional)</label>
                                        <select class="form-select" id="secondaryService" name="secondaryService">
                                            <option value="">Select secondary preference (optional)</option>
                                            <option value="Police Scotland">Police Scotland</option>
                                            <option value="Scottish Ambulance Service">Scottish Ambulance Service</option>
                                            <option value="Scottish Fire and Rescue Service">Scottish Fire and Rescue Service</option>
                                            <option value="Civilian">Civilian</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="whyJoin" class="form-label">Why do you want to join Blue Light RPC? <span class="text-danger">*</span></label>
                                        <textarea class="form-control" id="whyJoin" name="whyJoin" rows="4" required placeholder="Tell us what interests you about our community and why you'd like to be part of it..."></textarea>
                                    </div>
                                </div>

                                <div class="form-section">
                                    <h3 class="form-section-title"><i class="fas fa-gamepad"></i> Gaming & Experience</h3>
                                    
                                    <div class="mb-3">
                                        <label for="rpExperience" class="form-label">Previous Roleplay Experience <span class="text-danger">*</span></label>
                                        <textarea class="form-control" id="rpExperience" name="rpExperience" rows="4" required placeholder="Please describe your roleplay experience in detail. Include communities you've been part of, how long you've been roleplaying, and what types of roleplay you've done."></textarea>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="emergencyServiceKnowledge" class="form-label">Knowledge of Emergency Services <span class="text-danger">*</span></label>
                                        <textarea class="form-control" id="emergencyServiceKnowledge" name="emergencyServiceKnowledge" rows="3" required placeholder="What do you know about emergency services? Have you studied them, worked in emergency services, or have family/friends in the profession?"></textarea>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="scenarioResponse" class="form-label">Scenario Question <span class="text-danger">*</span></label>
                                        <div class="alert alert-light" id="scenarioText">
                                            <strong>Scenario:</strong> <span id="scenarioContent">Please select your primary service choice above to see the relevant scenario question.</span>
                                        </div>
                                        <textarea class="form-control" id="scenarioResponse" name="scenarioResponse" rows="4" required placeholder="Describe step-by-step how you would handle this scenario. Consider safety, procedures, and professionalism." disabled></textarea>
                                        <div class="form-text">This scenario will change based on your primary service choice above.</div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="availability" class="form-label">Availability <span class="text-danger">*</span></label>
                                        <textarea class="form-control" id="availability" name="availability" rows="2" required placeholder="When are you typically available to participate? (e.g., weekdays 6-10pm, weekends, etc.)"></textarea>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="hoursPerWeek" class="form-label">Expected Commitment <span class="text-danger">*</span></label>
                                        <select class="form-select" id="hoursPerWeek" name="hoursPerWeek" required>
                                            <option value="">How many hours per week can you commit?</option>
                                            <option value="1-5 hours">1-5 hours per week</option>
                                            <option value="5-10 hours">5-10 hours per week</option>
                                            <option value="10-15 hours">10-15 hours per week</option>
                                            <option value="15-20 hours">15-20 hours per week</option>
                                            <option value="20+ hours">20+ hours per week</option>
                                        </select>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="hasMicrophone" name="hasMicrophone" required>
                                                <label class="form-check-label" for="hasMicrophone">
                                                    I have a working microphone <span class="text-danger">*</span>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="readRules" name="readRules" required>
                                                <label class="form-check-label" for="readRules">
                                                    I have read and agree to the <a href="/rules.html" target="_blank">community rules</a> <span class="text-danger">*</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-section">
                                    <h3 class="form-section-title"><i class="fas fa-users"></i> Community & Teamwork</h3>
                                    
                                    <div class="mb-3">
                                        <label for="teamworkExample" class="form-label">Teamwork Experience <span class="text-danger">*</span></label>
                                        <textarea class="form-control" id="teamworkExample" name="teamworkExample" rows="3" required placeholder="Describe a situation where you had to work as part of a team. This can be from gaming, work, school, or any other context."></textarea>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="conflictResolution" class="form-label">Conflict Resolution <span class="text-danger">*</span></label>
                                        <textarea class="form-control" id="conflictResolution" name="conflictResolution" rows="3" required placeholder="How would you handle a disagreement with another community member during roleplay?"></textarea>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="leadershipInterest" class="form-label">Leadership Interest</label>
                                        <select class="form-select" id="leadershipInterest" name="leadershipInterest">
                                            <option value="">Are you interested in leadership roles?</option>
                                            <option value="Very interested">Very interested - I'd like to lead eventually</option>
                                            <option value="Somewhat interested">Somewhat interested - Maybe in the future</option>
                                            <option value="Not interested">Not interested - I prefer to follow</option>
                                            <option value="Unsure">Unsure at this time</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="communityContribution" class="form-label">Community Contribution <span class="text-danger">*</span></label>
                                        <textarea class="form-control" id="communityContribution" name="communityContribution" rows="3" required placeholder="How do you plan to contribute to the Blue Light RPC community beyond just participating in roleplay?"></textarea>
                                    </div>
                                </div>

                                <div class="form-section">
                                    <h3 class="form-section-title"><i class="fas fa-brain"></i> Situational Awareness</h3>
                                    
                                    <div class="mb-3">
                                        <label for="stressfulSituation" class="form-label">Handling Pressure <span class="text-danger">*</span></label>
                                        <textarea class="form-control" id="stressfulSituation" name="stressfulSituation" rows="3" required placeholder="Describe how you handle stressful or high-pressure situations. Give a specific example if possible."></textarea>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="realismImportance" class="form-label">Realism in Roleplay <span class="text-danger">*</span></label>
                                        <select class="form-select" id="realismImportance" name="realismImportance" required>
                                            <option value="">How important is realism to you in emergency services roleplay?</option>
                                            <option value="Extremely important">Extremely important - I want everything to be as realistic as possible</option>
                                            <option value="Very important">Very important - Realism is key but some flexibility is okay</option>
                                            <option value="Moderately important">Moderately important - Balance between realism and fun</option>
                                            <option value="Somewhat important">Somewhat important - Fun comes before strict realism</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="improvementAreas" class="form-label">Areas for Improvement</label>
                                        <textarea class="form-control" id="improvementAreas" name="improvementAreas" rows="2" placeholder="What skills or areas would you like to improve through your time in Blue Light RPC?"></textarea>
                                    </div>
                                </div>

                                <div class="form-section">
                                    <h3 class="form-section-title"><i class="fas fa-question-circle"></i> Background Questions</h3>
                                    
                                    <div class="mb-3">
                                        <label for="findCommunity" class="form-label">How did you find us? <span class="text-danger">*</span></label>
                                        <select class="form-select" id="findCommunity" name="findCommunity" required>
                                            <option value="">How did you discover Blue Light RPC?</option>
                                            <option value="Discord">Discord server or advertisement</option>
                                            <option value="Friend">Friend or community member recommendation</option>
                                            <option value="Social Media">Social media (Twitter, Reddit, etc.)</option>
                                            <option value="Search Engine">Google or other search engine</option>
                                            <option value="Gaming Platform">Gaming platform or forum</option>
                                            <option value="Other">Other (please specify in additional comments)</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="otherCommunities" class="form-label">Other Communities</label>
                                        <textarea class="form-control" id="otherCommunities" name="otherCommunities" rows="2" placeholder="Are you currently active in any other roleplay communities? If so, please list them and your involvement level."></textarea>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="longTermGoals" class="form-label">Long-term Goals <span class="text-danger">*</span></label>
                                        <textarea class="form-control" id="longTermGoals" name="longTermGoals" rows="3" required placeholder="What are your goals for your time in Blue Light RPC? What do you hope to achieve or experience?"></textarea>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="dealBreakers" class="form-label">Concerns or Questions</label>
                                        <textarea class="form-control" id="dealBreakers" name="dealBreakers" rows="2" placeholder="Are there any concerns, questions, or things that would make you leave the community? We'd rather address them upfront."></textarea>
                                    </div>
                                </div>

                                <div class="form-section">
                                    <h3 class="form-section-title"><i class="fas fa-comments"></i> Additional Information</h3>
                                    
                                    <div class="mb-3">
                                        <label for="additionalInfo" class="form-label">Anything else you'd like us to know?</label>
                                        <textarea class="form-control" id="additionalInfo" name="additionalInfo" rows="3" placeholder="Share any additional information, questions, or comments..."></textarea>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="agreePrivacy" name="agreePrivacy" required>
                                            <label class="form-check-label" for="agreePrivacy">
                                                I agree to the <a href="/privacy.html" target="_blank">Privacy Policy</a> <span class="text-danger">*</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-submit">
                                    <button type="submit" class="btn btn-custom btn-involved btn-lg">
                                        <i class="fas fa-paper-plane"></i> Submit Application
                                    </button>
                                </div>
                            </form>
                            
                            <div class="post-submit-info mt-4">
                                <div class="alert alert-info">
                                    <h5><i class="fas fa-info-circle"></i> What happens next?</h5>
                                    <ol>
                                        <li>Your application will be automatically sent to our staff team via Discord webhook</li>
                                        <li><strong>Please open a ticket in our Discord server</strong> to let us know you've submitted an application</li>
                                        <li>Our team will review your application within 24-48 hours</li>
                                        <li>You'll be contacted via Discord with the next steps</li>
                                    </ol>
                                    <div class="mt-3">
                                        <a href="https://discord.gg/gUKKXsaNt3" class="btn btn-custom btn-discord">
                                            <i class="fab fa-discord"></i> Open Discord Ticket
                                        </a>
                                    </div>
                                </div>
                                
                                <div class="alert alert-warning">
                                    <h6><i class="fas fa-exclamation-triangle"></i> Important Notes:</h6>
                                    <ul class="mb-0">
                                        <li>Make sure to have JavaScript enabled in your browser</li>
                                        <li>If submission fails, please contact us directly on Discord</li>
                                        <li>Keep a copy of your responses in case we need to verify details</li>
                                        <li>Applications are processed in the order they're received</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="successModalLabel">
                        <i class="fas fa-check-circle"></i> Application Submitted Successfully!
                    </h5>
                </div>
                <div class="modal-body text-center">
                    <div class="success-icon mb-3">
                        <i class="fas fa-check-circle text-success" style="font-size: 4rem;"></i>
                    </div>
                    <h4>Thank you for your application!</h4>
                    <p>Your application has been sent to our Discord server. Please remember to open a ticket in Discord to notify our staff.</p>
                    <div class="mt-3">
                        <a href="https://discord.gg/gUKKXsaNt3" class="btn btn-custom btn-discord me-2">
                            <i class="fab fa-discord"></i> Open Discord Ticket
                        </a>
                        <a href="/" class="btn btn-outline-secondary">Return Home</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="/assets/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="/assets/js/dataTables.bootstrap5.min.js"></script>
    
    <script>
        // Scenario questions based on service choice
        const scenarios = {
            "Police Scotland": {
                text: "You're on patrol as a Police Officer and receive a call about a domestic disturbance. When you arrive, you find two people arguing loudly outside a house, with neighbors watching from their windows. One person appears agitated and is shouting, while the other seems distressed. How would you handle this situation?",
                placeholder: "Consider: officer safety, de-escalation techniques, information gathering, legal procedures, and community relations."
            },
            "Scottish Ambulance Service": {
                text: "You're responding to a 999 call for a 45-year-old male experiencing chest pain at a local shopping center. When you arrive, the patient is conscious but sweating profusely and complaining of severe chest pain radiating to his left arm. There's a crowd of concerned bystanders. How would you handle this emergency?",
                placeholder: "Consider: patient assessment, medical priorities, scene management, treatment protocols, and communication with hospital."
            },
            "Scottish Fire and Rescue Service": {
                text: "You're responding to a house fire call in a residential area. Upon arrival, you see smoke coming from a two-story house and a woman frantically telling you that her elderly neighbor might still be inside. The fire appears to be in the kitchen area, and you can see flames through the window. How would you handle this emergency?",
                placeholder: "Consider: scene assessment, safety priorities, rescue procedures, fire suppression tactics, and coordination with other services."
            },
            "Civilian": {
                text: "You're walking through town center when you witness a road traffic accident between a car and a cyclist. The cyclist is on the ground and appears injured, while the car driver seems shaken but unharmed. There are other pedestrians gathering around, and traffic is building up. How would you respond as a responsible civilian?",
                placeholder: "Consider: personal safety, helping the injured, calling emergency services, managing bystanders, and preserving the scene."
            }
        };

        // Update scenario based on primary service selection
        document.getElementById('primaryService').addEventListener('change', function() {
            const selectedService = this.value;
            const scenarioContent = document.getElementById('scenarioContent');
            const scenarioTextarea = document.getElementById('scenarioResponse');
            
            if (selectedService && scenarios[selectedService]) {
                scenarioContent.textContent = scenarios[selectedService].text;
                scenarioTextarea.placeholder = scenarios[selectedService].placeholder;
                scenarioTextarea.disabled = false;
            } else {
                scenarioContent.textContent = "Please select your primary service choice above to see the relevant scenario question.";
                scenarioTextarea.placeholder = "Describe step-by-step how you would handle this scenario. Consider safety, procedures, and professionalism.";
                scenarioTextarea.disabled = true;
            }
        });

        // Application form submission
        document.getElementById('applicationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Collect form data
            const formData = new FormData(this);
            const applicationData = {};
            
            // Convert FormData to object
            for (let [key, value] of formData.entries()) {
                applicationData[key] = value;
            }
            
            // Add checkbox values
            applicationData.hasMicrophone = document.getElementById('hasMicrophone').checked;
            applicationData.readRules = document.getElementById('readRules').checked;
            applicationData.agreePrivacy = document.getElementById('agreePrivacy').checked;
            
            // Format data for Discord webhook
            const discordPayload = {
                embeds: [
                    {
                        title: "üÜï New Blue Light RPC Application",
                        color: 0x007bff,
                        fields: [
                            {
                                name: "üë§ Personal Information",
                                value: `**Name:** ${applicationData.firstName} ${applicationData.lastName}\\n**Age:** ${applicationData.age}\\n**Discord:** ${applicationData.discordUsername}\\n**Timezone:** ${applicationData.timezone}`,
                                inline: false
                            },
                            {
                                name: "üöî Service Preferences",
                                value: `**Primary Choice:** ${applicationData.primaryService}\\n**Secondary Choice:** ${applicationData.secondaryService || 'None'}`,
                                inline: false
                            },
                            {
                                name: "üí≠ Why Join Blue Light RPC?",
                                value: applicationData.whyJoin.substring(0, 1024),
                                inline: false
                            }
                        ],
                        footer: {
                            text: `Application submitted at ${new Date().toLocaleString()}`
                        },
                        timestamp: new Date().toISOString()
                    },
                    {
                        title: "üéÆ Gaming & Experience Details",
                        color: 0x28a745,
                        fields: [
                            {
                                name: "Previous RP Experience",
                                value: applicationData.rpExperience.substring(0, 1024),
                                inline: false
                            },
                            {
                                name: "Emergency Services Knowledge",
                                value: applicationData.emergencyServiceKnowledge.substring(0, 1024),
                                inline: false
                            },
                            {
                                name: "Scenario Response",
                                value: applicationData.scenarioResponse.substring(0, 1024),
                                inline: false
                            },
                            {
                                name: "Availability & Commitment",
                                value: `**Availability:** ${applicationData.availability}\\n**Hours per week:** ${applicationData.hoursPerWeek}`,
                                inline: false
                            }
                        ]
                    },
                    {
                        title: "üë• Community & Background",
                        color: 0xffc107,
                        fields: [
                            {
                                name: "Teamwork Experience",
                                value: applicationData.teamworkExample.substring(0, 1024),
                                inline: false
                            },
                            {
                                name: "Conflict Resolution",
                                value: applicationData.conflictResolution.substring(0, 1024),
                                inline: false
                            },
                            {
                                name: "Community Contribution",
                                value: applicationData.communityContribution.substring(0, 1024),
                                inline: false
                            },
                            {
                                name: "Leadership & Goals",
                                value: `**Leadership Interest:** ${applicationData.leadershipInterest || 'Not specified'}\\n**Long-term Goals:** ${applicationData.longTermGoals.substring(0, 500)}`,
                                inline: false
                            }
                        ]
                    },
                    {
                        title: "üß† Assessment & Background",
                        color: 0x6f42c1,
                        fields: [
                            {
                                name: "Handling Pressure",
                                value: applicationData.stressfulSituation.substring(0, 1024),
                                inline: false
                            },
                            {
                                name: "Realism Importance",
                                value: applicationData.realismImportance,
                                inline: true
                            },
                            {
                                name: "How They Found Us",
                                value: applicationData.findCommunity,
                                inline: true
                            },
                            {
                                name: "Other Communities",
                                value: applicationData.otherCommunities || 'None specified',
                                inline: false
                            }
                        ]
                    }
                ]
            };
            
            // Add optional fields if provided
            if (applicationData.improvementAreas) {
                discordPayload.embeds[2].fields.push({
                    name: "Areas for Improvement",
                    value: applicationData.improvementAreas.substring(0, 1024),
                    inline: false
                });
            }
            
            if (applicationData.dealBreakers) {
                discordPayload.embeds[3].fields.push({
                    name: "Concerns/Questions",
                    value: applicationData.dealBreakers.substring(0, 1024),
                    inline: false
                });
            }
            
            if (applicationData.additionalInfo) {
                discordPayload.embeds[3].fields.push({
                    name: "‚ÑπÔ∏è Additional Information",
                    value: applicationData.additionalInfo.substring(0, 1024),
                    inline: false
                });
            }
            
            // Send to Discord webhook (obfuscated for GitHub hosting)
            const w1 = 'aHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvd2ViaG9va3Mv';
            const w2 = 'MTQzODI4NTk4MTc2MDQ4NzQ1NQ==';
            const w3 = 'VnlRRVNaaU9HYlVBdVRMckJpWXFoWWhsNFZiWTgwY2pmZ25vYUNhZEt4d0VKTktEODNxX0o0VXVUVWNRWXBII0Yw';
            const WEBHOOK_URL = atob(w1) + atob(w2) + '/' + atob(w3).replace('H0F0', 'xI0F0');
            
            // Show loading state
            const submitButton = document.querySelector('button[type="submit"]');
            const originalButtonText = submitButton.innerHTML;
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Submitting...';
            submitButton.disabled = true;
            
            // Send to Discord
            fetch(WEBHOOK_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(discordPayload)
            })
            .then(response => {
                if (response.ok) {
                    // Success - show modal
                    const successModal = new bootstrap.Modal(document.getElementById('successModal'));
                    successModal.show();
                    
                    // Reset form
                    this.reset();
                    
                    // Reset scenario
                    document.getElementById('scenarioContent').textContent = "Please select your primary service choice above to see the relevant scenario question.";
                    document.getElementById('scenarioResponse').disabled = true;
                } else {
                    throw new Error('Webhook request failed');
                }
            })
            .catch(error => {
                console.error('Error sending webhook:', error);
                
                // Show error message
                toastr.error('There was an error submitting your application. Please try again or contact us on Discord.', 'Submission Failed');
                
                // Log data for manual processing if needed
                console.log('Application data (for manual processing):', applicationData);
            })
            .finally(() => {
                // Restore button state
                submitButton.innerHTML = originalButtonText;
                submitButton.disabled = false;
            });
        });
        
        // Form validation helpers
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl)
        })

        function imgError(image) {
            image.onerror = "";
            image.src = "/assets/images/community_logo.png?1762979827";
            return true;
        }
    </script>
</body>
</html>